<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>My Collection</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    /* Page-local styles: Image toggle button, search bar, and image-hidden layout */
    .controls { align-items:center; gap:12px; display:flex; }

    /* Image toggle styled as a pill button that changes color */
    .img-toggle {
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding:6px 10px;
      border-radius:999px;
      background:#8b0000; /* default red (off) */
      color:#fff;
      font-weight:700;
      cursor:pointer;
      border:0;
      box-shadow:0 2px 6px rgba(0,0,0,0.25);
      transition:background .15s ease, transform .06s ease;
    }
    .img-toggle:focus { outline:3px solid rgba(255,255,255,0.08); outline-offset:2px; }
    .img-toggle.on { background:#20b038; } /* green when on */
    .img-toggle .dot {
      width:14px;
      height:14px;
      border-radius:50%;
      background:#fff;
      box-shadow:inset 0 -2px 0 rgba(0,0,0,0.15);
      flex:0 0 auto;
    }
    .img-toggle.on .dot { background:#fff; } /* dot stays white for contrast */

    /* Search bar under header */
    .search-row {
      width:100%;
      display:flex;
      justify-content:center;
      padding:12px 16px;
      background:transparent;
      box-sizing:border-box;
    }
    .search {
      width:100%;
      max-width:780px;
      display:flex;
      gap:8px;
      align-items:center;
    }
    .search input[type="search"]{
      flex:1 1 auto;
      padding:10px 12px;
      border-radius:8px;
      border:0;
      background:rgba(255,255,255,0.04);
      color:#fff;
      font-size:1rem;
      outline-offset:2px;
    }
    .search button{
      padding:10px 12px;
      border-radius:8px;
      border:0;
      background:var(--accent);
      color:#000b1a;
      font-weight:700;
      cursor:pointer;
      min-width:84px;
    }

    /* When images are turned off, hide images and restyle cards */
    body.images-off .card-movie img { display:none; }
    body.images-off .card-movie {
      padding:14px 12px;
      display:flex;
      align-items:center;
      min-height:auto;
    }
    body.images-off .card-movie .meta { padding:0; }
    body.images-off .card-movie .meta strong{
      display:block;
      font-size:1.05rem;
      color:var(--accent);
    }
    body.images-off .card-movie .meta .sub{
      display:block;
      color:var(--muted);
      margin-top:6px;
      font-size:0.95rem;
    }

    /* small tweaks for mobile */
    @media (max-width:700px){
      .search-row { padding:8px 12px; }
      .search input[type="search"]{ padding:12px; }
      .img-toggle { padding:8px 12px; }
    }
  </style>
</head>
<body class="bb-bg">
  <header class="collection-header">
    <a class="back" href="home.html">←</a>
    <h3 class="title">My Collection</h3>

    <div class="controls">
      <!-- Image toggle button (acts as single control, green when on, red when off) -->
      <button id="imgToggle" class="img-toggle" aria-pressed="true" title="Toggle images">
        <span class="dot" aria-hidden="true"></span>
        <span class="label">Images</span>
      </button>

      <details class="control">
        <summary>Filter ▾</summary>
        <div class="control-group">
          <details class="subcontrol">
            <summary>Genre ▸</summary>
            <ul class="option-list">
              <li>Action</li><li>Comedy</li><li>Drama</li><li>Horror</li><li>Sci‑Fi</li>
              <li>Romance</li><li>Thriller</li><li>Animation</li><li>Documentary</li><li>Other</li>
            </ul>
          </details>

          <details class="subcontrol">
            <summary>Rating ▸</summary>
            <ul class="option-list">
              <li>Any Rating</li><li>R</li><li>PG‑13</li><li>PG</li><li>G</li><li>NR</li>
            </ul>
          </details>

          <details class="subcontrol">
            <summary>Year ▸</summary>
            <ul class="option-list">
              <li>2020s</li><li>2010s</li><li>2000s</li><li>1990s</li><li>1980s</li>
              <li>1970s</li><li>1960s</li><li>1950s and earlier</li>
            </ul>
          </details>
        </div>
      </details>

      <details class="control">
        <summary>Sort ▾</summary>
        <ul class="option-list">
          <li>Most Watched</li><li>Release Date</li><li>Recently Added</li><li>A - Z</li>
        </ul>
      </details>
    </div>
  </header>

  <!-- Search bar placed directly under the header -->
  <div class="search-row" role="search" aria-label="Search collection">
    <form class="search" id="collectionSearch" action="#" method="get" onsubmit="return false;">
      <input type="search" id="searchInput" name="q" placeholder="Search your collection (title, year, genre...)" aria-label="Search your collection">
      <button type="submit" id="searchBtn">Search</button>
    </form>
  </div>

  <main class="container">
    <section class="grid" id="movieGrid">
      <!-- Repeat these cards for as many movies as you like; use placeholder images -->
      <article class="card-movie" data-title="The Avengers" data-meta="Action · PG‑13 · 2010s">
        <img src="the-avengers.jpg" alt="The Avengers">
        <div class="meta">
          <strong>The Avengers</strong>
          <span class="sub">Action · PG‑13 · 2010s</span>
        </div>
      </article>

      <article class="card-movie" data-title="Bedtime Stories" data-meta="Comedy · PG · 2000s">
        <img src="Bedtime-Stories.jpg" alt="Bedtime Stories">
        <div class="meta">
          <strong>Bedtime Stories</strong>
          <span class="sub">Comedy · PG · 2000s</span>
        </div>
      </article>

      <article class="card-movie" data-title="Se7en" data-meta="Horror · R · 1990s">
        <img src="se7en.jpg" alt="Se7en">
        <div class="meta">
          <strong>Se7en</strong>
          <span class="sub">Horror · R · 1990s</span>
        </div>
      </article>

      <!-- Add more placeholders as needed -->
    </section>
  </main>

  <script>
    // Image toggle button logic
    (function () {
      const btn = document.getElementById('imgToggle');
      function setState(on, skipFocus) {
        btn.classList.toggle('on', on);
        btn.setAttribute('aria-pressed', String(on));
        document.body.classList.toggle('images-off', !on);
        // small visual nudge
        if (!skipFocus) { btn.blur(); }
      }
      // Initialize ON by default
      setState(true, true);

      btn.addEventListener('click', function () {
        const isOn = btn.classList.contains('on');
        setState(!isOn);
      });

      // Keyboard support (Enter/Space)
      btn.addEventListener('keydown', function (e) {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          btn.click();
        }
      });
    })();

    // Simple client-side search that filters visible cards by title/meta
    (function () {
      const form = document.getElementById('collectionSearch');
      const input = document.getElementById('searchInput');
      const grid = document.getElementById('movieGrid');
      const cards = Array.from(grid.querySelectorAll('.card-movie'));

      function normalize(s) { return (s || '').toLowerCase(); }

      function applyFilter(q) {
        const term = normalize(q).trim();
        if (!term) {
          cards.forEach(c => c.style.display = '');
          return;
        }
        cards.forEach(card => {
          const title = normalize(card.dataset.title || card.querySelector('strong')?.textContent);
          const meta = normalize(card.dataset.meta || card.querySelector('.sub')?.textContent);
          const match = title.includes(term) || meta.includes(term);
          card.style.display = match ? '' : 'none';
        });
      }

      // Submit or change filters
      form.addEventListener('submit', function (e) {
        e.preventDefault();
        applyFilter(input.value);
      });

      input.addEventListener('input', function () {
        applyFilter(this.value);
      });
    })();
  </script>
</body>
</html>
```